{"remainingRequest":"D:\\GraduationProject\\finally\\music_rs\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader-v16\\dist\\index.js??ref--0-1!D:\\GraduationProject\\finally\\music_rs\\src\\views\\RecommendSongs.vue?vue&type=style&index=0&id=31cb725c&scoped=true&lang=css","dependencies":[{"path":"D:\\GraduationProject\\finally\\music_rs\\src\\views\\RecommendSongs.vue","mtime":1651071830965},{"path":"D:\\GraduationProject\\finally\\music_rs\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\GraduationProject\\finally\\music_rs\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader-v16\\dist\\stylePostLoader.js","mtime":499162500000},{"path":"D:\\GraduationProject\\finally\\music_rs\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"D:\\GraduationProject\\finally\\music_rs\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\GraduationProject\\finally\\music_rs\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgovKiDlrZfkvZPlm77moIfpvKDmoIfopobnm5blj5joibIgKi8KI3NvbmdzLXJlY29tbWVuZCBpLmljb25mb250Lmljb24tYm9mYW5nOmhvdmVyIHsKCWN1cnNvcjogcG9pbnRlcjsKCS8qIGNvbG9yOiByZ2IoMjMxLCA1NiwgNDApOyAqLwoJY29sb3I6ICNmNTZjNmM7Cn0KCiNzb25ncy1yZWNvbW1lbmQgewoJcGFkZGluZy10b3A6IDA7Cglwb3NpdGlvbjogYWJzb2x1dGU7Cgl3aWR0aDogMTA2MHB4ICFpbXBvcnRhbnQ7CglyaWdodDogMDsKCWxlZnQ6IDA7CgltYXJnaW4tbGVmdDogYXV0bzsKCW1hcmdpbi1yaWdodDogYXV0bzsKfQoKLyog5pS26JeP5q2M5puy5r+A5rS754q25oCBICovCiNzb25ncy1yZWNvbW1lbmQgLmFjdGl2ZSB7Cgljb2xvcjogI2Y1NmM2YzsKfQoKLyog5a2X5L2T5Zu+5qCH6byg5qCH6KaG55uW5Y+Y6ImyICovCiNzb25ncy1yZWNvbW1lbmQgaS5pY29uZm9udC5pY29uLXNob3VjYW5nX2h1YWJhbjE6aG92ZXIgewoJY3Vyc29yOiBwb2ludGVyOwp9CgovKiDooajmoLzkuK3kuI3lj6/mkq3mlL7nmoTnmoTnpoHmraLngrnlh7vmoLflvI8gKi8KI3NvbmdzLXJlY29tbWVuZCAuZmFpbCB7CgkvKiBwb2ludGVyLWV2ZW50czogbm9uZTsgKi8KCWNvbG9yOiAjOWI5YjliOwoJY3Vyc29yOiBub3QtYWxsb3dlZDsKfQovKiDlj6/ku6Xmkq3mlL7liJnkuI3lgZrku7vkvZXkv67mlLkgKi8KI3NvbmdzLXJlY29tbWVuZCAuc3VjYyB7CgkvKiBwb2ludGVyLWV2ZW50czogbm9uZTsgKi8KCS8qIGNvbG9yOiAjOWI5YjliOwoJY3Vyc29yOiBub3QtYWxsb3dlZDsgKi8KfQo="},{"version":3,"sources":["D:\\GraduationProject\\finally\\music_rs\\src\\views\\RecommendSongs.vue"],"names":[],"mappings":"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","file":"D:/GraduationProject/finally/music_rs/src/views/RecommendSongs.vue","sourceRoot":"","sourcesContent":["// 歌曲日推功能\n<template>\n\t<div id=\"songs-recommend\">\n\t\t<el-table :data=\"tableData\" stripe style=\"width: 100%;\" :header-cell-style=\"{ fontWeight: 'normal', border: 'none' }\">\n\t\t\t<!-- :header-cell-style=\"{ fontWeight: 'normal' }\"设置表头样式，中间的连接符去掉，改成驼峰形式 -->\n\t\t\t<el-table-column align=\"center\" prop=\"index\" label=\"\" width=\"120\">\n\t\t\t\t<template #default=\"scope\">\n\t\t\t\t\t<div :class=\"scope.row.downUrl == 'None' ? 'fail' : 'succ'\">\n                        <!--序号-->\n\t\t\t\t\t\t<span style=\"font-size:16px;width:20px;display:inline-block;\">\n\t\t\t\t\t\t\t{{ scope.$index + 1 }}\n\t\t\t\t\t\t</span>\n                        <!--播放-->\n\t\t\t\t\t\t<i class=\"iconfont icon-bofang\" style=\"margin-left:10px;font-size:18px;width:20px;display:inline-block;\"\n\t\t\t\t\t\t\t@click=\"startPlay(scope.$index)\" :class=\"\n\t\t\t\t\t\t\t\tscope.row.downUrl == 'None' ? 'fail' : 'succ'\"></i>\n\t\t\t\t\t\t<!--收藏-->\n                        <i class=\"iconfont icon-shoucang_huaban1\" style=\"margin-left:10px;font-size:18px;width:20px;display:inline-block;\"\n\t\t\t\t\t\t\t@click=\"addLove(scope.$index)\" :class=\"[\n\t\t\t\t\t\t\t\tscope.row.downUrl == 'None' ? 'fail' : 'succ',\n\t\t\t\t\t\t\t\tscope.row.isLove === true ? 'active' : '',\n\t\t\t\t\t\t\t]\" ></i>\n\t\t\t\t\t</div>\n\t\t\t\t</template>\n\t\t\t</el-table-column>\n\n\t\t\t<el-table-column align=\"center\" prop=\"songName\" label=\"歌曲名\" width=\"220\">\n\t\t\t\t<!-- 在表格中添加跳转链接 -->\n\t\t\t\t<template #default=\"scope\">\n\t\t\t\t\t<span :class=\"scope.row.downUrl == 'None' ? 'fail' : 'succ'\" >\n\t\t\t\t\t\t{{ scope.row.songName }}\n\t\t\t\t\t</span>\n\t\t\t\t</template>\n\t\t\t</el-table-column>\n\n\t\t\t<el-table-column align=\"center\" prop=\"singerName\" label=\"歌手\" width=\"220\">\n\t\t\t\t<template #default=\"scope\">\n\t\t\t\t\t<span :class=\"scope.row.downUrl == 'None' ? 'fail' : 'succ'\">\n\t\t\t\t\t\t{{ scope.row.singerName }}\n\t\t\t\t\t</span>\n\t\t\t\t</template>\n\t\t\t</el-table-column>\n\n\t\t\t<el-table-column align=\"center\" prop=\"album\" label=\"专辑\" width=\"300\" >\n\t\t\t\t<template #default=\"scope\">\n\t\t\t\t\t<span :class=\"scope.row.downUrl == 'None' ? 'fail' : 'succ'\" >\n\t\t\t\t\t\t{{ scope.row.album }}\n\t\t\t\t\t</span>\n\t\t\t\t</template>\n\t\t\t</el-table-column>\n\n\t\t\t<el-table-column align=\"center\" prop=\"songTime\" label=\"时长\" width=\"200\" >\n\t\t\t\t<template #default=\"scope\">\n\t\t\t\t\t<span :class=\"scope.row.downUrl == 'None' ? 'fail' : 'succ'\" >\n\t\t\t\t\t\t{{ scope.row.songTime }}\n\t\t\t\t\t</span>\n\t\t\t\t</template>\n\t\t\t</el-table-column>\n\t\t</el-table>\n\n\t\t<!-- 分页，这里的分页和Discover.vue略有不同 -->\n\t\t<el-pagination background layout=\"prev, pager, next\" :total=\"totalNum\" :current-page=\"currentPage\" style=\"padding-top:30px;\"\n\t\t\t@current-change=\"handleCurrentChange\">\n        </el-pagination>\n\t</div>\n</template>\n\n\n\n<script>\nimport {getRecommendSongs, _addLoveSong, _cancelLoveSong} from \"../network/request.js\"\nimport { useStore } from \"vuex\"\n\nexport default {\n\tname: \"recommendsongs\",\n\tdata() {\n\t\tconst item = {\n\t\t\tiid: \"\",\n\t\t\tsongName: \"\",\n\t\t\tsingerName: \"\",\n\t\t\talbum: \"\",\n\t\t\tsongTime: \"\",\n\t\t\tdownUrl: \"\",\n\t\t\tpicUrl: \"\",\n\t\t}\n\t\treturn {\n\t\t\tuid: useStore().state.user.uid,\n\t\t\tdownUrl: \"\",\n\t\t\tsongsData: [],\n\t\t\ttotalNum: 20,//推荐20首歌\n\t\t\tpageSize: 10,//每页10首\n\t\t\tcurrentPage: 1,\n\t\t\ttableData: Array(10).fill(item),\n\t\t}\n\t},\n\n\tcreated() {\n\t\t// 拿到uid\n\t\t// this.uid = this.useruid\n\t\tconst user = useStore().state.user\n\t\tconsole.log(user)\n\t\tvar useruid = user.uid\n\t\tconsole.log(useruid)\n\t\t// 得到歌曲的详情信息\n\t\tgetRecommendSongs({ uid: useruid + \"\" }).then((response) => {\n\t\t\tconst r = response.data\n\t\t\tif(r.code != 200){\n\t\t\t\tthis.$message({type: \"warning\", message: r.msg})\n\t\t\t}\n\t\t\tthis.songsData = response.data.data\n\t\t\tconsole.log(response.data.data)\n            //截取\n\t\t\tthis.tableData = this.songsData.slice(\n\t\t\t\t(this.currentPage - 1) * this.pageSize,\n\t\t\t\tthis.currentPage * this.pageSize,\n\t\t\t)\n\t\t\tconsole.log(this.tableData)\n\t\t})\n        // 页面加载时读取数据\n\t\tif (window.sessionStorage.getItem(\"user\")) {\n\t\t\tconsole.log(\"页面加载\")\n            const session_user = JSON.parse(window.sessionStorage.getItem(\"user\"))\n\t\t\tconsole.log(session_user)\n\t\t\tthis.$store.commit(\"SET_USER\", session_user)\n\t\t}\n\t\t// 页面刷新时保存状态\n\t\twindow.addEventListener(\"beforeunload\", () => {\n\t\t\tconsole.log(\"页面刷新\")\n\t\t\tconsole.log(this.$store.state.user)\n\t\t\twindow.sessionStorage.setItem(\n\t\t\t\t\"user\",\n\t\t\t\tJSON.stringify(this.$store.state.user),\n\t\t\t)\n\t\t})\n\t},\n\n\tmethods: {\n\t\t// 播放音乐\n\t\tstartPlay(index) {\n\t\t\tconsole.log(index)\n            //获取这首歌在20首推荐歌曲中的位置\n\t\t\tvar currentIndex = parseInt(index) + (this.currentPage - 1) * 10\n\t\t\tconsole.log(currentIndex)\n\t\t\tvar song = this.songsData[currentIndex]\n\t\t\tconsole.log(song)\n\t\t\tthis.downUrl = song.downUrl\n\t\t\tconsole.log(this.downUrl)\n\t\t\tconsole.log(song.picUrl)\n\t\t\tvar iid = song.iid\n\t\t\tvar picUrl = song.picUrl\n\t\t\tvar songName = song.songName\n\t\t\tvar singerName = song.singerName\n\t\t\tvar mp3Url = this.downUrl\n\t\t\t// 将事件传递给子组件，第一个参数为自定义事件名，后续参数为传递过去的数据\n\t\t\tconsole.log(\"开始emit\")\n\t\t\tthis.$emit(\"playmusic\", iid, mp3Url, picUrl, songName, singerName)\n\t\t\tconsole.log(\"结束emit\")\n\t\t},\n\n\t\t// 下一页\n\t\thandleCurrentChange(val) {\n\t\t\tconsole.log(`当前页: ${val}`)\n\t\t\tthis.currentPage = val\n\t\t\t// 换页之后改变tableData，重新渲染\n\t\t\tthis.tableData = this.songsData.slice(\n\t\t\t\t(this.currentPage - 1) * this.pageSize,\n\t\t\t\tthis.currentPage * this.pageSize,\n\t\t\t)\n\t\t\tconsole.log(this.tableData)\n\t\t},\n\n\t\t// 添加收藏歌曲\n\t\taddLove(index) {\n\t\t\tvar isLove = this.songsData[parseInt(index)].isLove\n\t\t\tvar songName = this.songsData[parseInt(index)].songName\n\t\t\tif (isLove === true) {//收藏点击->取消收藏\n\t\t\t\tthis.songsData[parseInt(index)].isLove = false\n\t\t\t\t_cancelLoveSong({\n\t\t\t\t\tuid: this.uid,\n\t\t\t\t\tiid: this.songsData[parseInt(index)].iid,\n\t\t\t\t}).then((response) => {\n\t\t\t\t\tif (response.data.code === 200) {\n\t\t\t\t\t\tconsole.log(\"取消收藏\")\n\t\t\t\t\t\tthis.$message({\n\t\t\t\t\t\t\ttype: \"info\",\n\t\t\t\t\t\t\tmessage: songName + \" \" + \"取消收藏!\",\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t} else {//未收藏点击->收藏\n\t\t\t\tthis.songsData[parseInt(index)].isLove = true\n\t\t\t\t_addLoveSong({\n\t\t\t\t\tuid: this.uid,\n\t\t\t\t\tiid: this.songsData[parseInt(index)].iid,\n\t\t\t\t}).then((response) => {\n\t\t\t\t\tif (response.data.code === 200) {\n\t\t\t\t\t\tconsole.log(\"收藏歌曲\")\n\t\t\t\t\t\tthis.$message({\n\t\t\t\t\t\t\ttype: \"success\",\n\t\t\t\t\t\t\tmessage: songName + \" \" + \"收藏成功!\",\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t}\n\t\t},\n\t},\n}\n</script>\n\n<style scoped>\n\n/* 字体图标鼠标覆盖变色 */\n#songs-recommend i.iconfont.icon-bofang:hover {\n\tcursor: pointer;\n\t/* color: rgb(231, 56, 40); */\n\tcolor: #f56c6c;\n}\n\n#songs-recommend {\n\tpadding-top: 0;\n\tposition: absolute;\n\twidth: 1060px !important;\n\tright: 0;\n\tleft: 0;\n\tmargin-left: auto;\n\tmargin-right: auto;\n}\n\n/* 收藏歌曲激活状态 */\n#songs-recommend .active {\n\tcolor: #f56c6c;\n}\n\n/* 字体图标鼠标覆盖变色 */\n#songs-recommend i.iconfont.icon-shoucang_huaban1:hover {\n\tcursor: pointer;\n}\n\n/* 表格中不可播放的的禁止点击样式 */\n#songs-recommend .fail {\n\t/* pointer-events: none; */\n\tcolor: #9b9b9b;\n\tcursor: not-allowed;\n}\n/* 可以播放则不做任何修改 */\n#songs-recommend .succ {\n\t/* pointer-events: none; */\n\t/* color: #9b9b9b;\n\tcursor: not-allowed; */\n}\n</style>\n"]}]}